{
	"info": {
		"_postman_id": "61d8e37f-cdea-4271-9823-1e1881b4e14f",
		"name": "iTODO App API test",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Registration",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "default",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\":\"user@user.com\",\n    \"password\":\"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base-url}}/api/auth/register",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json()",
									"pm.environment.set(\"jwt_token\", response.token)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\":\"user@user.com\",\n    \"password\":\"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base-url}}/api/auth/login",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Tasks",
			"item": [
				{
					"name": "Create a task",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\":\"morning\",\n    \"description\":\"cook eggs for breakfast\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base-url}}/api/tasks",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"tasks"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get list of active tasks (TODO list)",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base-url}}/api/tasks",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"tasks"
							]
						}
					},
					"response": []
				},
				{
					"name": "Change a task status",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\":\"morning\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base-url}}/api/tasks/done",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"tasks",
								"done"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get list of done tasks (DONE list)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base-url}}/api/tasks/done",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"tasks",
								"done"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update a task",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\":\"evening\",\n    \"description\":\"cook vegetable for dinner\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base-url}}/api/tasks/{{taskTitle}}",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"tasks",
								"{{taskTitle}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete a task",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\":\"evening\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base-url}}/api/tasks",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"tasks"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GraphQL",
			"item": [
				{
					"name": "Ceate a task",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json()",
									"pm.environment.set(\"task_ID\", response.data.createTask.id)",
									"pm.environment.set(\"tags\", response.data.createTask.tags[0])"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n    createTask(input: {\n        title: \"weekend\"\n        description: \"go to a party on friday\"\n        tags: [\n            \"dress\", \"fragrance\",\n        ]\n    }) {\n        id\n        title\n        description\n        tags\n        done\n    }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{base-url}}/graphql",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get list of active tasks (TODO list)",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n    getTodoTasks{\n        id\n        title\n        description\n        tags\n        done\n    }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{base-url}}/graphql",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get a task",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query ($id: ID!){\n    getTask(id: $id) {\n        title\n        description\n        done\n    }\n}",
								"variables": "{\n    \"id\": \"{{task_ID}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base-url}}/graphql",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Find tasks by tags",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query ($tags: [String]!){\n    findTasks(tags: $tags){\n        id\n        title\n        description\n        tags\n        done\n    }\n}",
								"variables": "{\n    \"tags\": \"{{tags}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base-url}}/graphql",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update a task",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation ($id: ID!){\n    updateTask(id: $id, input: {\n        title: \"weekend\"\n        description: \"go to a party on friday\"\n        tags: [\"dress\", \"fragrance\"]\n        done: true\n    }) {\n        id\n        title\n        description\n        tags\n        done\n    }\n}",
								"variables": "{\n    \"id\": \"{{task_ID}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base-url}}/graphql",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get list of done tasks (DONE list)",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n    getDoneTasks {\n        id\n        title\n        description\n        tags\n        done\n    }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{base-url}}/graphql",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"graphql"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete a task",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "default"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation ($id: ID!){\n    deleteTask(id: $id)\n}",
								"variables": "{\n    \"id\": \"{{task_ID}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base-url}}/graphql",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"graphql"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}